<!DOCTYPE html>
<html>

<head>
	<script src="https://telegram.org/js/telegram-web-app.js">  
	</script>
	<meta charset="UTF-8">    
	<meta name="viewport" content="width=device-width, initial-scale=1.0">    
	<title>AskLLM MiniApp</title>

<!------------------------------------Стили----------------------------------------------->
<style>
@import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
@import url("https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css");
*, *:before, *:after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

body {
  font: 14px/1 'Open Sans', sans-serif;
  color: #555;
  background: #eee;
}

h1 {
  padding: 1em;
  font-weight: 400;
  text-align: center;
}


p { 
  margin: 0 0 20px; 
  line-height: 1.5; 
}

main {
  min-width: 220px;
  max-width: 600px;
  padding: 50px;
  margin: 0 auto;
  background: #fff;
}

button {
   align: center;
   padding: 3px;
   font-size: 12px;
}
	
section {
  display: none;
  padding: 20px 0 0;
  border-top: 1px solid #ddd;
}

input {
  display: none;
}

label {
  display: inline-block;
  margin: 0 0 -1px;
  padding: 15px 25px;
  font-weight: 600;
  text-align: center;
  color: #bbb;
  border: 1px solid transparent;
}

label:before {
  font-family: fontawesome;
  font-weight: normal;
  margin-right: 10px;
}

label[for*='1']:before {
  content: '\f044';
}

label[for*='2']:before {
  content: '\f0d0';
}

label[for*='3']:before {
  content: '\f0ca';
}

label:hover {
  color: #888;
  cursor: pointer;
}

input:checked + label {
  color: #555;
  border: 1px solid #ddd;
  border-top: 2px solid orange;
  border-bottom: 1px solid #fff;
}

#tab1:checked ~ #content1,
#tab2:checked ~ #content2,
#tab3:checked ~ #content3 {
  display: block;
}

@media screen and (max-width: 650px) {
  label {
    font-size: 0;
  }

  label:before {
    margin: 0;
    font-size: 18px;
  }
}
@media screen and (max-width: 400px) {
  label {
    padding: 15px;
  }
}
</style>
</head>
	
<body>

<script>
	const tg = window.Telegram.WebApp;
	newPrompt = ""
	
	function setPrompt_1() {
		newPrompt = document.getElementById('prompt1').value
		console.log('setPrompt_1 = ', newPrompt);
		setNewPrompt()
	}

	function setPrompt_2() {
		s_role = document.getElementById('role').value
		s_task = document.getElementById('task').value
		s_format = document.getElementById('format').value
		newPrompt = "Действуя в качестве " + s_role + ", сделай " + s_task + " по {input}, покажи результат в форме " + s_format
		console.log('setPrompt_2 = ', newPrompt);
		setNewPrompt()
	}

	function setPrompt_3() {
		templates = {
				1:"Разбейте {input} на более мелкие, понятные части. Используйте аналогии и примеры из реальной жизни, чтобы упростить концепцию и сделать ее более понятной.",
				2:"Проанализируйте приведенный ниже текст на предмет стиля, тембра и интонации. Создайте запрос на написание нового абзаца в том же стиле, тембре и тоне: {input}",
				3:"Используйте свои знания по {input} для решения реальной проблемы. Объясните ход своих мыслей и поделитесь своим решением.",
				4:"Сравните и противопоставьте {input}, чтобы лучше понять их сходства и различия. Используйте примеры, чтобы проиллюстрировать свою точку зрения.",
				5:"Мне нужно прочитать сложную статью, связанную с {input}. Не могли бы вы помочь мне обобщить ключевые моменты и выводы из текста?",
		}
		i_template = document.getElementById('template').value
		newPrompt = templates[i_template]
		console.log('setPrompt_3 = ', newPrompt);
		setNewPrompt()
	}

	<!-- let url = 'ССЫЛКА_НА_YANDEX_FUNCTION'; -->
	<!-- Данные для отправки в телеграм - новый промпт -->
	var data = JSON.stringify(newPrompt);  
		
	function setNewPrompt() {
		console.log("start");            
		var xhr = new XMLHttpRequest();            
		xhr.open("POST", url, true);            
		xhr.setRequestHeader("Content-Type", "application/json");  

		<!-- ЭТО НЕ НАДО?????? -->
		xhr.setRequestHeader("X-Custom-Info", "getOpenInvoiceUrl");            
		xhr.onreadystatechange = function () {                
			if (xhr.readyState === 4 && xhr.status === 200) { 
				tg.openInvoice(xhr.responseText);             
			}            
		};            
		xhr.send(data);
	}
</script>

<!------------------------------------Вкладки (tabs)---------------------------------------->
	
<h1>Задать промпт</h1>
<main>
  
  <input id="tab1" type="radio" name="tabs" checked>
  <label for="tab1">Ручной</label>
    
  <input id="tab2" type="radio" name="tabs">
  <label for="tab2">Конструктор</label>
    
  <input id="tab3" type="radio" name="tabs">
  <label for="tab3">Шаблон</label>

    
  <section id="content1">
      			<h2>Введите свой промпт:</h2>
	  		<p></p>
			<p>
				<textarea id="prompt1" name="prompt" rows="3"></textarea>
			</p>
  			<p>
				<button align="center" onclick="setPrompt_1();">Задать промпт</button>
			</p>
  </section>
    
  <section id="content2">
      			<h2>Действуя в качестве [Роль], сделай [Действие], покажи результат в форме [Формат результата]</h2>
			<p></p>
	  		<p>
				Роль:&nbsp;
				<select id="role" name="role" required="required">
					<option value="Аналитика">Аналитик</option>
					<option value="Юриста">Юрист</option>
					<option value="Менеджера проекта">Менеджер проекта</option>
					<option value="Продавца">Продавец</option>
					<option value="Терапевта">Терапевт</option>
					<option value="Писателя">Писатель</option>
					<option value="Разработчика веб-сайта">Разработчик веб-сайта</option>
					<option value="Инвестора">Инвестор</option>
					<option value="Инженера">Инженер</option>
					<option value="Промпт-инженера">Промпт-инженер</option>
					<option value="Тренера">Тренер</option>
					<option value="Копирайтера">Копирайтер</option>
				</select>
			</p>
			<p>
				Действие:&nbsp;
				<select id="task" name="task" required="required">
					<option value="заголовок">Заголовок</option>
					<option value="эссе">Эссе</option>
					<option value="анализ">Анализ</option>
					<option value="аналитический обзор">Аналитический обзор</option>
					<option value="рекламный текст">Рекламный текст</option>
					<option value="описание товара">Описание товара</option>
					<option value="сопроводительное письмо">Сопроводительное письмо</option>
					<option value="сценарий">Сценарий</option>
					<option value="алгоритм">Алгоритм</option>
					<option value="ключевые слова для SEO">Ключевые слова для SEO</option>
				</select>
			</p>
			<p>
				Формат результата:&nbsp;
				<select id="format" name="format" required="required">
					<option value="текста">Текст</option>
					<option value="списка">Список</option>
					<option value="таблицы">Таблица</option>
					<option value="HTML">HTML</option>
					<option value="код">Код</option>
				</select>
			</p>
  			<p>
				<button align="center" onclick="setPrompt_2();">Задать промпт</button>
			</p>
  </section>
    
  <section id="content3">
      			<h2>Выберите шаблон:</h2>
			<p></p>
	  		<p>
				<select id="template" name="prompt_3">
					<option value="1">Упрости сложную информацию</option>
					<option value="2">Тренируйся, чтобы научиться писать правильно</option>
					<option value="3">Применяй свои знания</option>
					<option value="4">Сравнивай и противопоставляй</option>
					<option value="5">Обобщи сложный текст</option>
				</select>
			</p>
  			<p>
				<button align="center" onclick="setPrompt_3();">Задать промпт</button>
			</p>
  </section>
</main>
	
</body>
</html>
